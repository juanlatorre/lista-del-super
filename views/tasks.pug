extends layout

block content

  .menu.text-center
    ul.nav.nav-pills
      li.active
        a(href='/tasks') Lista
      li
        a(href="/tasks/completed") Completado

  .list.text-center
    .item.add-task
      //- div.action
      //-   form(action='/tasks', method='post')
      //-     input(type='hidden', value='true', name='all_done')
      //-     input(type='hidden', value=locals._csrf, name='_csrf')
      //-     input(type='submit', class='btn btn-success btn-xs', value='nada pendiente')
      form(action='/tasks', method='post')
        input(type='hidden', value=locals._csrf, name='_csrf')
        div.name
          input(type='text', name='name', placeholder='Agregar nuevo...' autofocus=true)
        div.delete
          input.btn.btn-primary.btn-sm(type="submit", value='Agregar')
    if (tasks.length === 0)
      | No hay nada pendiente.
    each task, index in tasks
      .item
        div.delete
          a(class='btn btn-danger btn-xs task-delete', data-task-id=task._id.toString(), data-csrf=locals._csrf) borrar
        div.num
          span=index+1
            |.&nbsp;
        div.name
          span.name=task.name + ' (' + moment(task.createTime).format("LT") + ')'
        div.action
          form(action='/tasks/'+task._id, method='post')
            input(type='hidden', value=task._id.toString(), name='id')
            input(type='hidden', value='true', name='completed')
            input(type='hidden', value=locals._csrf, name='_csrf')
            input(type='submit', class='btn btn-success btn-xs task-done', value='listo')
